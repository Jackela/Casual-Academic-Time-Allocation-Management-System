Requirement ID,User Role,Workflow Description,Backend Endpoints,Frontend Components,Test Coverage,Notes
S1.1-AC2,Tutor/Lecturer/Admin,"Successful login issues JWT and routes user to dashboard","POST /api/auth/login","frontend/src/components/LoginPage.tsx; frontend/src/contexts/AuthContext.tsx; frontend/src/auth/SessionProvider.tsx","frontend/src/components/LoginPage.test.tsx; frontend/e2e/modules/tutor-workflow.spec.ts","Redirect handled with react-router; AuthManager syncs token to context"
S1.1-AC3,Tutor/Lecturer/Admin,"Invalid credentials display authentication failure message","POST /api/auth/login","frontend/src/components/LoginPage.tsx","frontend/src/components/LoginPage.test.tsx","Add Playwright assertion for error banner"
S4.1-AC1,Tutor/Lecturer/Admin,"Centralized AuthManager keeps API client token aligned with AuthContext state","POST /api/auth/login","frontend/src/contexts/AuthContext.tsx; frontend/src/services/api-secure.ts; frontend/src/services/auth-manager.ts","frontend/src/test/services/auth-manager.test.ts","Maintain matrix when updating auth/tokens"
S1.2-AC2,Tutor,"Tutor can view paginated list of own timesheets from dashboard","GET /api/timesheets","frontend/src/components/dashboards/TutorDashboard/TutorDashboard.tsx; frontend/src/components/dashboards/TutorDashboard/hooks/useTutorDashboardViewModel.ts; frontend/src/components/shared/TimesheetTable/TimesheetTable.tsx","frontend/src/components/dashboards/TutorDashboard/TutorDashboard.test.tsx; frontend/e2e/modules/tutor-workflow.spec.ts","Client-side filters complement server query params"
S1.3-AC3,Tutor,"Tutor submits draft timesheet for lecturer review","POST /api/approvals","frontend/src/components/dashboards/TutorDashboard/TutorDashboard.tsx; frontend/src/components/dashboards/TutorDashboard/components/TimesheetForm.tsx; frontend/src/services/timesheets.ts","frontend/src/components/dashboards/TutorDashboard/TutorDashboard.test.tsx; frontend/e2e/modules/tutor-workflow.spec.ts","Bulk submit UI present; backend batching still pending"
S2.2-AC3,Tutor,"Tutor edits rejected timesheet to return to draft status","PUT /api/timesheets/{id}","frontend/src/components/dashboards/TutorDashboard/TutorDashboard.tsx; frontend/src/components/dashboards/TutorDashboard/components/TimesheetForm.tsx; frontend/src/services/timesheets.ts","frontend/src/components/dashboards/TutorDashboard/TutorDashboard.test.tsx; frontend/e2e/modules/tutor-workflow.spec.ts","Ensure validation errors surface through shared error banners"
S3.1-AC1,Tutor,"Tutor dashboard summary shows personal hours, pay, and pending metrics","GET /api/dashboard/summary","frontend/src/components/dashboards/TutorDashboard/hooks/useTutorDashboardViewModel.ts; frontend/src/components/dashboards/TutorDashboard/components/QuickStats.tsx; frontend/src/components/dashboards/TutorDashboard/components/PaySummary.tsx","frontend/src/components/dashboards/TutorDashboard/TutorDashboard.test.tsx","Add Playwright assertion for summary widgets"
S2.1-AC1,Lecturer,"Lecturer views pending timesheets requiring review","GET /api/timesheets/pending-final-approval","frontend/src/components/dashboards/LecturerDashboard/LecturerDashboardShell.tsx; frontend/src/components/dashboards/LecturerDashboard/components/LecturerPendingTable.tsx; frontend/src/components/dashboards/LecturerDashboard/hooks/useLecturerDashboardData.ts; frontend/src/components/shared/TimesheetTable/TimesheetTable.tsx","frontend/src/components/dashboards/LecturerDashboard/LecturerDashboard.test.tsx; frontend/e2e/modules/lecturer-workflow.spec.ts","Filters combine urgent toggle, course select, and search"
S2.1-AC2,Lecturer,"Lecturer approves pending timesheet transitioning it forward","POST /api/approvals","frontend/src/components/dashboards/LecturerDashboard/components/LecturerPendingTable.tsx; frontend/src/components/dashboards/LecturerDashboard/hooks/useLecturerDashboardData.ts; frontend/src/services/timesheets.ts","frontend/src/components/dashboards/LecturerDashboard/LecturerDashboard.test.tsx; frontend/e2e/modules/lecturer-workflow.spec.ts","Batch approval shares same service path"
EA1-AC1,Tutor/Lecturer,"Quote endpoint returns EA-compliant associated hours, payable hours, and amount","POST /api/timesheets/quote","frontend/src/services/timesheets.ts; frontend/src/components/dashboards/TutorDashboard/components/TimesheetForm.tsx","frontend/e2e/mock/tests/timesheets/quote-calculation-flow.spec.ts; src/test/java/com/usyd/catams/controller/TimesheetControllerIntegrationTest.java; src/test/java/com/usyd/catams/service/Schedule1CalculatorTest.java","Backend owns financial calculations; frontend treats result as read-only"
EA1-AC2,Tutor/Lecturer,"Timesheet create/update ignores client financial fields and persists Schedule 1 calculation","POST /api/timesheets; PUT /api/timesheets/{id}","frontend/src/services/timesheets.ts","src/test/java/com/usyd/catams/controller/TimesheetControllerIntegrationTest.java; src/test/java/com/usyd/catams/service/Schedule1CalculatorTest.java","TimesheetApplicationService applies Schedule1Calculator output on every mutation"
EA1-AC3,Admin,"Schedule 1 policy tables seeded with University of Sydney EA 2023-2026 rates","Flyway V11__Create_policy_rate_tables.sql; V12__Add_schedule1_fields_to_timesheets.sql; V13__Seed_schedule1_rates.sql; V14__Add_timesheet_calculation_metadata.sql","src/main/resources/db/migration","src/test/java/com/usyd/catams/service/Schedule1PolicyProviderTest.java","Ensure migrations execute in all environments; seeding is prerequisite for calculator accuracy"
EA1-AC4,Tutor,"Timesheet form surfaces rate code, version, and formula to provide transparency","POST /api/timesheets/quote","frontend/src/components/dashboards/TutorDashboard/components/TimesheetForm.tsx; frontend/src/components/shared/NotificationPresenter","frontend/e2e/mock/tests/timesheets/quote-calculation-flow.spec.ts","UI displays backend metadata (rateCode, rateVersion, formula) for compliance audits"
S2.1-AC3,Lecturer,"Lecturer rejects timesheet with comment for tutor follow-up","POST /api/approvals","frontend/src/components/dashboards/LecturerDashboard/LecturerDashboardShell.tsx; frontend/src/components/dashboards/LecturerDashboard/hooks/useLecturerDashboardData.ts","frontend/src/components/dashboards/LecturerDashboard/LecturerDashboard.test.tsx","Add Playwright coverage for rejection modal interaction"
S3.1-AC2,Lecturer,"Lecturer dashboard summary highlights course metrics and urgent count","GET /api/dashboard/summary","frontend/src/components/dashboards/LecturerDashboard/components/LecturerSummaryBanner.tsx; frontend/src/components/dashboards/LecturerDashboard/hooks/useLecturerDashboardData.ts","frontend/src/components/dashboards/LecturerDashboard/LecturerDashboard.test.tsx","Ensure summary matches mock metrics in tests"
S3.1-AC3,Admin,"Admin dashboard shows system-wide totals and KPIs","GET /api/dashboard/summary","frontend/src/components/dashboards/AdminDashboard/AdminDashboardShell.tsx; frontend/src/components/dashboards/AdminDashboard/components/AdminMetricsPanel.tsx; frontend/src/components/dashboards/AdminDashboard/hooks/useAdminDashboardData.ts","frontend/src/components/dashboards/AdminDashboard/AdminDashboard.test.tsx; frontend/e2e/modules/admin-workflow.spec.ts","Analytics tab currently placeholder; hide or annotate before launch"
SSOT-Step5-Approve,Admin,"Admin performs final approval on lecturer-confirmed timesheets","POST /api/approvals","frontend/src/components/dashboards/AdminDashboard/components/AdminPendingReviewPanel.tsx; frontend/src/components/shared/TimesheetTable/TimesheetTable.tsx; frontend/src/components/dashboards/AdminDashboard/hooks/useAdminDashboardData.ts","frontend/src/components/dashboards/AdminDashboard/AdminDashboard.test.tsx; frontend/e2e/modules/admin-workflow.spec.ts","Bulk admin approval not yet implemented"
SSOT-Step5-Reject,Admin,"Admin rejects lecturer-confirmed timesheet with justification","POST /api/approvals","frontend/src/components/dashboards/AdminDashboard/components/AdminRejectionModal.tsx; frontend/src/components/dashboards/AdminDashboard/hooks/useAdminDashboardData.ts","frontend/src/components/dashboards/AdminDashboard/AdminDashboard.test.tsx","Plan Playwright test to assert focus trap and error states"
S3.0-AC1,All,"Backend recalculates all financial fields using Schedule 1 policy data","POST /api/timesheets/quote; POST /api/timesheets","Schedule1Calculator; TimesheetController","Schedule1CalculatorTest; TimesheetControllerIntegrationTest; frontend/e2e/quote-calculation-flow.spec.ts","Ensure SSOT policy remains enforced"
