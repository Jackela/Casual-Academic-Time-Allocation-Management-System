ApprovalStatus:
  type: string
  enum:
    - DRAFT
    - PENDING_TUTOR_CONFIRMATION
    - TUTOR_CONFIRMED
    - LECTURER_CONFIRMED
    - FINAL_CONFIRMED
    - REJECTED
    - MODIFICATION_REQUESTED
  description: |
    Confirmation status of a timesheet:
    - **DRAFT**: Initial state, being prepared
    - **PENDING_TUTOR_CONFIRMATION**: Submitted for tutor confirmation
    - **TUTOR_CONFIRMED**: Confirmed by tutor, awaiting lecturer confirmation
    - **LECTURER_CONFIRMED**: Confirmed by lecturer, awaiting HR confirmation
    - **FINAL_CONFIRMED**: Final confirmation by HR, ready for payment
    - **REJECTED**: Rejected by tutor, lecturer or HR
    - **MODIFICATION_REQUESTED**: Modifications requested before confirmation
  example: "PENDING_TUTOR_CONFIRMATION"

ApprovalActionRequest:
  type: object
  required:
    - timesheetId
    - action
  properties:
    timesheetId:
      type: integer
      format: int64
      description: ID of the timesheet to act upon
      example: 789
    action:
      $ref: '#/ApprovalAction'
    comment:
      type: string
      description: Optional comment explaining the action
      example: "Confirmed - hours and description look correct"
      maxLength: 500

ApprovalAction:
  type: string
  enum:
    - SUBMIT_FOR_APPROVAL
    - TUTOR_CONFIRM
    - LECTURER_CONFIRM
    - HR_CONFIRM
    - REJECT
    - REQUEST_MODIFICATION
  description: |
    Type of confirmation action:
    - **SUBMIT_FOR_APPROVAL**: Submit draft timesheet for confirmation
    - **TUTOR_CONFIRM**: Tutor confirms the timesheet accuracy
    - **LECTURER_CONFIRM**: Lecturer confirms the timesheet
    - **HR_CONFIRM**: HR provides final confirmation for payroll
    - **REJECT**: Reject the timesheet
    - **REQUEST_MODIFICATION**: Request changes to the timesheet
  example: "TUTOR_CONFIRM"

ApprovalActionResponse:
  type: object
  required:
    - timesheetId
    - action
    - newStatus
    - approverId
    - approverName
    - timestamp
  properties:
    timesheetId:
      type: integer
      format: int64
      description: ID of the timesheet that was acted upon
      example: 789
    action:
      $ref: '#/ApprovalAction'
    newStatus:
      $ref: '#/ApprovalStatus'
    approverId:
      type: integer
      format: int64
      description: ID of the user who performed the action
      example: 999
    approverName:
      type: string
      description: Name of the user who performed the action
      example: "Dr. John Smith"
    comment:
      type: string
      nullable: true
      description: Comment provided with the action
      example: "Confirmed - hours and description look correct"
    timestamp:
      type: string
      format: date-time
      description: When the action was performed
      example: "2025-08-01T16:30:00Z"
    nextSteps:
      type: array
      description: Information about what happens next in the workflow
      items:
        type: string
      nullable: true
      example:
        - "Timesheet automatically moved to lecturer for confirmation"

ApprovalHistoryEntry:
  type: object
  required:
    - id
    - approverId
    - approverName
    - action
    - timestamp
  properties:
    id:
      type: integer
      format: int64
      description: Unique identifier for this history entry
      example: 1
    approverId:
      type: integer
      format: int64
      description: ID of the user who performed the action
      example: 999
    approverName:
      type: string
      description: Name of the user who performed the action
      example: "Dr. John Smith"
    action:
      $ref: '#/ApprovalAction'
    comment:
      type: string
      description: Comment provided with the action
      example: "Initial submission"
    timestamp:
      type: string
      format: date-time
      description: When the action was performed
      example: "2025-07-28T09:00:00Z"
